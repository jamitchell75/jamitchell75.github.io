<!doctype html>
<html lang="en">
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Welcome!</title>

<input id="file" type="file" />
<button id="send">Upload Resume(s)</button>
<pre id="out"></pre>
<p>Upload Your Resume here:</p>
<script>
  async function presign(name, type) {
    // Replace with your deployed API URL from Vercel (step 3), e.g.:
    const endpoint = "https://your-project.vercel.app/api/presign";
    const r = await fetch(`${endpoint}?key=${encodeURIComponent(name)}&type=${encodeURIComponent(type)}`);
    if (!r.ok) throw new Error(await r.text());
    return r.json(); // { url }
  }

  document.getElementById('send').onclick = async () => {
    const f = document.getElementById('file').files[0];
    if (!f) return;
    const out = document.getElementById('out');

    try {
      const { url } = await presign(f.name, f.type || 'application/octet-stream');
      const put = await fetch(url, { method: 'PUT', body: f, headers: { 'Content-Type': f.type || 'application/octet-stream' } });
      out.textContent = put.ok ? "Uploaded!" : `Upload failed: ${put.status} ${put.statusText}`;
    } catch (e) {
      out.textContent = e.message;
    }
  };
</script>

<input id="file" type="file" />
<button id="send">Upload Job Description</button>
<pre id="out"></pre>
<p>Upload the Job Description here:</p>
<script>
  async function presign(name, type) {
    // Replace with your deployed API URL from Vercel (step 3), e.g.:
    const endpoint = "https://your-project.vercel.app/api/presign";
    const r = await fetch(`${endpoint}?key=${encodeURIComponent(name)}&type=${encodeURIComponent(type)}`);
    if (!r.ok) throw new Error(await r.text());
    return r.json(); // { url }
  }

  document.getElementById('send').onclick = async () => {
    const f = document.getElementById('file').files[0];
    if (!f) return;
    const out = document.getElementById('out');

    try {
      const { url } = await presign(f.name, f.type || 'application/octet-stream');
      const put = await fetch(url, { method: 'PUT', body: f, headers: { 'Content-Type': f.type || 'application/octet-stream' } });
      out.textContent = put.ok ? "Uploaded!" : `Upload failed: ${put.status} ${put.statusText}`;
    } catch (e) {
      out.textContent = e.message;
    }
  };
</script>
